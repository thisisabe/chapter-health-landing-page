<!doctype html>
<html lang="en-AU">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chapter Health — Launching Soon</title>
  <meta name="description" content="Chapter Health — an integrative & functional health platform. Join the waitlist.">
  <link rel="icon" type="image/svg+xml" href="./CH-Logomark-RGB_LightPurple-FA.svg">
  <style>
   :root { --health-core:#18051E; --light-balance:#E8CDFF; --restorative-yellow:#FBF999; --peak-performance:#FF482C; }

   /* === Brand Fonts (embedded) === */
   @font-face {
     font-family: 'National 2 Narrow';
     src: url('./national-2-narrow-medium.woff2') format('woff2');
     font-display: swap;
     font-weight: 600;
     font-style: normal;
   }
   @font-face {
     font-family: 'PP Mori';
     src: url('./PPMori-Regular.woff2') format('woff2'),
          url('./PPMori-Regular.woff') format('woff');
     font-display: swap;
     font-weight: 400;
     font-style: normal;
   }
   @font-face {
     font-family: 'PP Mori';
     src: url('./PPMori-SemiBold.woff2') format('woff2'),
          url('./PPMori-SemiBold.woff') format('woff');
     font-display: swap;
     font-weight: 600;
     font-style: normal;
   }

   html, body { height:100%; }
   body { margin:0; background:var(--health-core); color:var(--light-balance); font-family:'PP Mori', Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif; }

   /* Background crossfade */
   .bg { position:fixed; inset:0; background-position:center; background-size:cover; background-repeat:no-repeat; transition:opacity 1.2s ease; }
   .bg.top { opacity:1; }
   .bg.bottom { opacity:0; }
   .overlay { position:fixed; inset:0; background: radial-gradient(120% 120% at 10% 10%, rgba(24,5,30,0.15), rgba(24,5,30,0.76)); pointer-events:none; }

   /* Layout */
   .wrap { min-height:100svh; position:relative; z-index:1; display:flex; flex-direction:column; }
   header { padding:20px 24px; display:flex; justify-content:space-between; align-items:center; gap:16px; }
   .logo { display:inline-flex; align-items:center; gap:10px; }
   .logo img { height:28px; width:auto; display:block; }
   .pill { display:inline-block; border:1px solid rgba(232,205,255,0.35); padding:6px 10px; border-radius:999px; font-size:12px; letter-spacing:.06em; text-transform:uppercase; }

   main { flex:1; display:grid; place-items:center; padding: 48px 24px; }
   .hero { max-width: 920px; }
   .kicker { font-family:'National 2 Narrow', 'Arial Narrow', 'Archivo Narrow', sans-serif; text-transform:uppercase; letter-spacing:.12em; font-size:12px; opacity:.85; }
   h1 { margin:.2em 0 .05em; font-family:'National 2 Narrow','Arial Narrow','Archivo Narrow',sans-serif; font-weight:600; text-transform:uppercase; font-size:clamp(44px, 8.2vw, 110px); line-height:.92; }
   .sub { font-family:'National 2 Narrow','Arial Narrow','Archivo Narrow',sans-serif; text-transform:uppercase; letter-spacing:.02em; font-size: clamp(16px, 2.4vw, 28px); opacity:.95; }
   p.lead { font-size: clamp(16px, 2.2vw, 22px); max-width: 48ch; margin: 14px 0 24px; opacity:.95; }

   form { display:flex; flex-wrap:wrap; gap:12px; align-items:center; }
   input[type=email] { flex:1; min-width:260px; background: rgba(232,205,255,0.10); border:1px solid rgba(232,205,255,0.35); color: var(--light-balance); padding:14px 16px; border-radius:12px; outline:none; font-size:16px; }
   input::placeholder { color: rgba(232,205,255,.7); }
   button { background: var(--peak-performance); color:#18051E; border:0; padding:14px 18px; border-radius:14px; font-weight:600; font-family:'National 2 Narrow','Arial Narrow','Archivo Narrow',sans-serif; text-transform:uppercase; letter-spacing:.06em; cursor:pointer; transition: transform .05s ease, opacity .2s; }
   button:hover { opacity:.95; }
   button:active { transform: translateY(1px); }
   .consent { font-size:12px; opacity:.75; margin-top:10px; }
   .success, .error { margin-top:14px; font-size:14px; }
   .success { color: var(--restorative-yellow); }
   .error { color: #FFB4A8; }

   footer { padding:24px; opacity:.6; font-size:12px; }
   a { color: var(--light-balance); }
  </style>
</head>
<body>
  <!-- Background -->
  <div class="bg top" id="a"></div>
  <div class="bg bottom" id="b"></div>
  <div class="overlay"></div>

  <!-- Foreground -->
  <div class="wrap">
    <header>
      <div class="logo">
        <img src="./CH-FullLogo-RGB_LightPurple-FA.svg" alt="Chapter Health">
        <span class="pill">Platform</span>
      </div>
    </header>

    <main>
      <section class="hero" role="region" aria-label="Launching soon">
        <div class="kicker">( TAKE CONTROL )</div>
        <h1>Launching Soon</h1>
        <div class="sub">Join the waitlist</div>
        <p class="lead">We’re building an integrative and functional health platform designed around you. Be first to know when we open access.</p>

        <form id="waitlist-form">
          <input aria-label="Email address" name="email" id="email" type="email" placeholder="Enter your email address" required>
          <button type="submit">Join the waitlist</button>
          <div id="form-message" role="status" aria-live="polite"></div>
        </form>
        <div class="consent">By joining, you agree we may email you about the launch. No medical advice is provided on this page. See our <a href="#" aria-label="Privacy policy">Privacy Policy</a>.</div>
      </section>
    </main>

    <footer>© <span id="year"></span> Chapter Health — mychapter.com.au</footer>
  </div>

  <script type="module">
    document.getElementById('year').textContent = new Date().getFullYear();

    // === Background rotation (JS crossfade) ===
    const IMAGES_DESKTOP = ["chase-yi-p-cfvgdus-g-unsplash-1920.webp", "dane-wetton-aksjqnem75y-unsplash-1920.webp", "dmitriy-frantsev-siqmq-6726y-unsplash-1920.webp", "pexels-alesger-novruz-721211807-18977541-1920.webp", "pexels-bamboo-ave-677926128-29205082-1920.webp", "pexels-ketut-subiyanto-4908993-1920.webp", "pexels-maksgelatin-4775192-1920.webp", "pexels-rethaferguson-3621183-1920.webp", "pexels-tima-miroshnichenko-6388383-1920.webp", "todd-quackenbush-e9pjo-vl3e8-unsplash-1920.webp"];
    const IMAGES_MOBILE = ["chase-yi-p-cfvgdus-g-unsplash-960.webp", "dane-wetton-aksjqnem75y-unsplash-960.webp", "dmitriy-frantsev-siqmq-6726y-unsplash-960.webp", "pexels-alesger-novruz-721211807-18977541-960.webp", "pexels-bamboo-ave-677926128-29205082-960.webp", "pexels-ketut-subiyanto-4908993-960.webp", "pexels-maksgelatin-4775192-960.webp", "pexels-rethaferguson-3621183-960.webp", "pexels-tima-miroshnichenko-6388383-960.webp", "todd-quackenbush-e9pjo-vl3e8-unsplash-960.webp"];
    const useMobile = Math.max(window.screen.width, window.innerWidth) <= 1024;
    const IMAGES = useMobile ? IMAGES_MOBILE : IMAGES_DESKTOP;

    const preload = IMAGES.map(src => new Promise(res => { const i = new Image(); i.onload = res; i.src = './' + src; }));
    Promise.allSettled(preload).then(() => {
      const a = document.getElementById('a');
      const b = document.getElementById('b');
      let idx = 0;
      function setBg(el, i) { el.style.backgroundImage = `url('./${IMAGES[i]}')`; }
      setBg(a, idx);
      setBg(b, (idx + 1) % IMAGES.length);
      let showingA = true;
      setInterval(() => {
        idx = (idx + 1) % IMAGES.length;
        if (showingA) {
          setBg(b, idx);
          b.className = 'bg top';
          a.className = 'bg bottom';
        } else {
          setBg(a, idx);
          a.className = 'bg top';
          b.className = 'bg bottom';
        }
        showingA = !showingA;
      }, 6000);
    });

    // === Email capture (Supabase optional) ===
    const SUPABASE_URL = ""; // e.g. "https://xxxx.supabase.co"
    const SUPABASE_ANON_KEY = "";
    const useSupabase = SUPABASE_URL && SUPABASE_ANON_KEY;

    const form = document.getElementById('waitlist-form');
    const msg = document.getElementById('form-message');

    async function saveWithSupabase(email) {
      const { createClient } = await import('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/+esm');
      const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
      const { error } = await supabase.from('waitlist').insert([{ email, source:'coming-soon', user_agent: navigator.userAgent }]);
      if (error) throw error;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.textContent = "";
      const email = (document.getElementById('email').value || '').trim();
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        msg.textContent = "Please enter a valid email.";
        msg.className = "error";
        return;
      }
      try {
        if (useSupabase) { await saveWithSupabase(email); }
        else {
          const key = 'chapter_health_waitlist';
          const existing = JSON.parse(localStorage.getItem(key) || "[]");
          existing.push({ email, ts: new Date().toISOString() });
          localStorage.setItem(key, JSON.stringify(existing));
        }
        form.reset();
        msg.textContent = "Thanks — you’re on the list.";
        msg.className = "success";
      } catch (err) {
        console.error(err);
        msg.textContent = "Sorry, something went wrong. Please try again.";
        msg.className = "error";
      }
    });
  </script>
</body>
</html>
