export async function POST(req){const body=await req.formData();const email=body.get("email");if(!email||typeof email!=="string"){return new Response("Invalid email",{status:400})}const url=process.env.SUPABASE_URL;const key=process.env.SUPABASE_SERVICE_ROLE||process.env.SUPABASE_ANON_KEY;if(!url||!key){console.log("[waitlist] captured email:",email);return Response.redirect("/",302)}try{const { createClient }=await import("@supabase/supabase-js");const supabase=createClient(url,key);const { error }=await supabase.from("waitlist").insert([{email,source:"coming-soon"}]);if(error){console.error(error)}}catch(e){console.error("[waitlist] supabase error",e)}return Response.redirect("/",302)}\n